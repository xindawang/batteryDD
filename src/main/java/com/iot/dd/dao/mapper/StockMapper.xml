<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iot.dd.dao.mapper.StockMapper">

    <select id="findBatteryStockByType" resultMap="BatteryStock">
        select b.type,c.city_name,bs.inventory
        from battery_stock bs
        left join city c
        on c.city_code=bs.city_code
         join battery b
        on b.id=bs.battery_id
        where bs.battery_id=#{batteryId}
    </select>
    
    <select id="findBatteryStockByCity" resultMap="BatteryStock">
         select b.type,c.city_name,bs.inventory
          from battery_stock bs
          left join city c
          on c.city_code=bs.city_code
          left join battery b
          on b.id=bs.battery_id
          where bs.city_code=#{cityCode}
    </select>


    <resultMap id="BatteryStock" type="com.iot.dd.dao.entity.resource.BatteryStockEntity">
        <result property="inventory" column="inventory" />
        <association property="battery" javaType="com.iot.dd.dao.entity.resource.BatteryEntity">
            <result property="type" column="type" />
        </association>
        <association property="city" javaType="com.iot.dd.dao.entity.resource.CityEntity">
            <result property="cityName" column="city_name" />
        </association>
    </resultMap>
</mapper>